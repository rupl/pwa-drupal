<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>PWAs for all Drupal sites</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- custom styles -->
		<style type="text/css">
			.reveal .expire {
			  padding: 0 .5em;
			  color: #f33;
			  border: 5px solid #f33;
			  background-color: rgba(255, 0, 0, .1666);
			  border-radius: 16px;
			  position: absolute;
			  bottom: 0;
			  right: 0;
			  transform: rotate(-11deg);
			}
			.reveal code {
				display: inline-block;
				background: #888;
				border-radius: 7px;
				padding: 0 .2em;
				font-family: 'Roboto mono', monospace;
				text-shadow: .05em .05em 0 rgba(0, 0, 0, .666);
			}
			.reveal .compare {
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.reveal .tiles li {
				display: inline-block;
			}
			.reveal .tiles a {
				display: inline-block;
				width: 4em;
				margin: 1em .5em;
				padding: 2em 1em;
				background: rgba(255, 255, 255, 0.125);
				opacity: .666;
				text-align: center;
				border-radius: 7px;
				transition: opacity .1666s ease-in-out;
			}
			.reveal .tiles a:hover {
				opacity: 1;
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Progressive<br> Web Apps<br><small>for all Drupal sites</small></h1>
					<div class="fragment expire">
						Best Read Before:<br>
						<time datetime="2018-10-04">4. Oct 2018</time>
					</div>
				</section>
				<section>
					<h2>What's a PWA?</h2>
					<p><a href="https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/" target="_blank" rel="noopener">Progressive Web App origin story</a></p>
					<ul>
						<li class="fragment">Responsive website</li>
						<li class="fragment">Network resilient</li>
						<li class="fragment">Native-feeling</li>
						<li class="fragment">Instant install</li>
						<li class="fragment">Discoverable</li>
						<li class="fragment">Safely delivered</li>
						<li class="fragment">...and more</li>
					</ul>
				</section>
				<section>
					<section>
						<h2>Main ingredients</h2>
						<dl>
							<dt><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Worker</a></dt>
							<dd>Controls network interaction and manages offline functionality.</dd>
							<dt><a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json">manifest.json</a></dt>
							<dd>Metadata which makes your website installable and discoverable.</dd>
						</dl>
					</section>
					<section>
						<h2>Service Worker</h2>
						<p>A separate JavaScript thread which has<br> listeners for network and app lifecycle events.</p>
						<p class="fragment">A friendly, useful man-in-the-middle attack.</p>
					</section>
					<section>
						<h2>manifest.json</h2>
						<p>Intended to replace the wall of <code>&lt;meta&gt;</code> that define app name, description, browser chrome color, favicons, and so forth.</p>
						<p class="fragment">Provides branding once the site is added to homescreen. Defines splash screen of a PWA.</p>
					</section>
					<section>
						<h2>SW + manifest</h2>
						<div class="compare">
							<img src="img/screen-offline.png" alt="screenshot of offline webpage" style="width: 25%; height: auto;">
							<span class="fragment" style="font-size: 5em; padding: 0 .2em; ">âž¡</span>
							<img class="fragment" src="img/screen-pwa-splash.png" alt="screenshot of PWA splash screen" style="width: 25%; height: auto;">
						</div>
					</section>
				</section>
				<section>
					<section>
						<h2>PWA in Drupal</h2>
						<p class="fragment">Good news! Drupal makes websites<br> so there's 100% compatability.</p>
					</section>
					<section>
						<h2>There's a module for that</h2>
						<p><a href="https://drupal.org/project/pwa" target="_blank" rel="noopener">PWA Drupal module</a> provides near drop-in support to turn your D7 website into a simple PWA.</p>
						<p class="fragment"><small>(very near 1.0 release)</small></p>
					</section>
					<section>
						<h2>PWA Module can...</h2>
						<ul>
							<li class="fragment">Precache your preferred URLs</li>
							<li class="fragment">Go offline after one cache clear</li>
							<li class="fragment">Provide manifest.json for installable app</li>
							<li class="fragment">Configure (almost) everything via admin UI</li>
							<li class="fragment"><strong>Uninstall SW when module disappears</strong></li>
						</ul>
					</section>
					<section>
						<h2>Self uninstall</h2>
						<p>The SW doesn't overstay its welcome when you disable the module. No <em>zombie workers</em>!</p>
						<p class="fragment">This is a concern for any domain, but especially likely on plugin-based CMS like Drupal or WordPress.</p>
					</section>
					<section>
						<h2>PWA module cannot...</h2>
						<ul>
							<li class="fragment">Handle push notifications</li>
							<li class="fragment">Handle background sync</li>
							<li class="fragment">Choose cache strategy</li>
						</ul>
						<p class="fragment">Instead of opinionated implementations, these bits are probably best supplied with a Drupal API.</p>
					</section>
					<section>
						<h2>PWA in action</h2>
						<ol>
							<li class="fragment">Install module &amp; save configuration</li>
							<li class="fragment">Clear cache</li>
							<li class="fragment">PWA module will make requests to your cache whitelist and cache all assets found within HTML response!!!</li>
							<li class="fragment">Your cache is pre-filled with any CSS/JS found within the cached URLs.</li>
						</ol>
					</section>
				</section>
				<section>
					<section>
						<h2>Future Drupal plans</h2>
						<p class="fragment">We're starting with opinionated features and will use our experiences to make flexible APIs.</p>
					</section>
					<section>
						<h2>Service Worker API</h2>
						<p><a href="https://www.drupal.org/project/serviceworker/issues/2679457">#2679457</a> is a Service Worker API roadmap. Hashing out ideas for a central Drupal API that allows modules to request custom functionality.</p>
						<p class="fragment">Using frontend community tools, we can supply a "Drupal builder" based on good ol' hooks.</p>
					</section>
					<section>
						<h2>Ideal Outcome</h2>
						<p>Allowing unrelated modules/themes to request specific features of PWA functionality.</p>
						<ul>
							<li class="fragment">Push notification module</li>
							<li class="fragment">Background sync module</li>
							<li class="fragment">PWA 2.0 reduced to manifest.json config</li>
							<li class="fragment">Views config that caches specific Ajax paths offline</li>
							<li class="fragment">Themes that provide an "app shell" and dynamically load new URLs as a faux-<abbr title="single-page application">SPA</abbr></li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Finished</h2>
						<p>Say hi:</p>
						<ul class="tiles">
							<li><a href="https://chrisruppel.com/work/" target="_blank" rel="noopener">chris</a></li>
							<li><a href="https://twitter.com/rupl" target="_blank" rel="noopener">twitter</a></li>
							<li><a href="https://github.com/rupl" target="_blank" rel="noopener">github</a></li>
						</ul>
					</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				defaultTiming: 600,
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
