<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>PWAs for all Drupal sites</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- custom styles -->
		<style type="text/css">
			.reveal .expire {
			  padding: 0 .5em;
			  color: #f33;
			  border: 5px solid #f33;
			  background-color: rgba(255, 0, 0, .1666);
			  border-radius: 16px;
			  position: absolute;
			  bottom: 0;
			  right: 0;
			  transform: rotate(-11deg);
			}
			.reveal code {
				display: inline-block;
				background: #888;
				border-radius: 7px;
				padding: 0 .2em;
				font-family: 'Roboto mono', monospace;
				text-shadow: .05em .05em 0 rgba(0, 0, 0, .666);
			}
			.reveal .compare {
				display: flex;
				align-items: center;
				justify-content: center;
			}
			.reveal .tiles li {
				display: inline-block;
			}
			.reveal .tiles a {
				display: inline-block;
				width: 4em;
				margin: 1em .5em;
				padding: 2em 1em;
				background: rgba(255, 255, 255, 0.125);
				opacity: .666;
				text-align: center;
				border-radius: 7px;
				transition: opacity .1666s ease-in-out;
			}
			.reveal .tiles a:hover {
				opacity: 1;
			}

			.reveal .slides section img.scroll {
				opacity: 1;
				visibility: visible;
				transition: transform .333s ease-in-out;
			}
			.reveal img.scroll.visible {
				transform: translateY(-50%);
			}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Progressive<br> Web Apps<br><small>for all Drupal sites</small></h1>
					<div class="fragment expire">
						Best Read Before:<br>
						<time datetime="2018-12-13">13. Dec 2018</time>
					</div>
				</section>
				<section>
					<h2>What's a PWA?</h2>
					<p><a href="https://infrequently.org/2015/06/progressive-apps-escaping-tabs-without-losing-our-soul/" target="_blank" rel="noopener">Progressive Web App origin story</a></p>
					<ul>
						<li class="fragment">Responsive website</li>
						<li class="fragment">Network resilient</li>
						<li class="fragment">Native-feeling</li>
						<li class="fragment">Instant install</li>
						<li class="fragment">Discoverable</li>
						<li class="fragment">Safely delivered</li>
						<li class="fragment">...and more</li>
					</ul>
				</section>
				<section>
					<section>
						<h2>Main ingredients</h2>
						<dl>
							<span class="fragment">
								<dt><a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API">Service Worker</a></dt>
								<dd>Controls network interaction, manages offline functionality, and increases engagement with website. Brings native app features to the web.</dd>
							</span>
							<span class="fragment">
								<dt><a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json">manifest.json</a></dt>
								<dd>Makes your website installable and discoverable.</dd>
							</span>
						</dl>
					</section>
					<section>
						<h2>Service Worker</h2>
						<p>A separate JavaScript thread which has listeners<br> for network requests and app lifecycle events.</p>
						<p class="fragment">üîê HTTPS is a hard dependency!</p>
					</section>
					<section>
						<h2>manifest.json</h2>
						<p>Provides branding when site is added to homescreen</p>
						<p class="fragment">Defines splash screen of a PWA</p>
						<p class="fragment">Allows PWAs to appear in app stores</p>
					</section>
					<section>
						<h2>SW + manifest</h2>
						<div class="compare">
							<img src="img/screen-offline.png" alt="typical offline webpage" style="width: 25%; height: auto;">
							<span class="fragment" style="font-size: 5em; padding: 0 .2em; ">‚û°</span>
							<img class="fragment" src="img/screen-pwa-splash.png" alt="PWA splash screen" style="width: 25%; height: auto;">
						</div>
					</section>
				</section>
				<section>
					<section>
						<h2>PWA in Drupal</h2>
						<p class="fragment">Good news! Drupal has 100% compatibility.</p>
						<p class="fragment">PWAs work with all Drupal sites,<br> <strong>no decoupling or app shell needed</strong>.</p>
					</section>
					<section>
						<h2>There's a module for that‚Ñ¢</h2>
						<p class="fragment"><a href="https://drupal.org/project/pwa" target="_blank" rel="noopener">PWA Drupal module</a> provides drop-in support<br> to turn your D7 website into a simple PWA.</p>
						<p class="fragment">D8 is coming sometime... <a class="fragment" target="_blank" href="https://www.drupal.org/project/issues/pwa?text=&status=Open&priorities=All&categories=All&version=8.x&component=All">Help us out!</a></p>
					</section>
					<section>
						<h2>PWA Module <span style="color: #9f9;">can...</span></h2>
						<ul>
							<li class="fragment">Precache your preferred URLs</li>
							<li class="fragment">Provide offline support after first visit</li>
							<li class="fragment">Provide manifest.json for installable app</li>
							<li class="fragment">Configure (almost) everything via admin UI</li>
							<li class="fragment"><strong>Uninstall SW when module is disabled</strong></li>
						</ul>
					</section>
					<section>
						<h2>Self uninstall</h2>
						<p>The SW doesn't overstay its welcome when<br> you disable the module. <em>No zombie workers</em>!</p>
						<p class="fragment">Avoids big problems on a plugin-based<br> CMS like Drupal or WordPress.</p>
					</section>
					<section>
						<h2>PWA module <span style="color: #f99;">cannot...</span></h2>
						<ul>
							<li class="fragment">Handle push notifications</li>
							<li class="fragment">Handle background sync</li>
							<li class="fragment">Choose cache strategy</li>
						</ul>
						<p class="fragment">Instead of opinionated implementations, these bits are probably best supplied with a Drupal API.</p>
					</section>
					<section>
						<h2>Admin UX</h2>
						<ol>
							<li class="fragment">Install module &amp; edit settings</li>
							<li class="fragment">Module makes requests to your whitelist<br> and generates a SW with pre-cache.</li>
						</ol>
					</section>
					<section>
						<h2>Manifest config</h2>
						<img class="fragment scroll" src="img/admin_config_system_pwa.png" alt="PWA add-to-homescreen config">
					</section>
					<section>
						<h2>SW config</h2>
						<img class="fragment scroll" src="img/admin_config_system_pwa_serviceworker.png" alt="PWA SW config">
					</section>
				</section>
				<section>
					<section>
						<h2>Quick demo</h2>
					</section>
					<section>
						<img class="fragment" src="img/pwa-demo2.gif" alt="quick screencase of PWA in action" style="transform: translateY(-32px)">
					</section>
				</section>
				<section>
					<section>
						<h2>What about D8?</h2>
						<blockquote class="fragment">
							<p>"You said all Drupal sites"</p>
						</blockquote>
					</section>
					<section>
						<p>I'm a frontend dev with D7 experience.</p>
						<p class="fragment">I need <strong>YOUR</strong> help with D8!</p>
						<p class="fragment"><a target="_blank" href="https://www.drupal.org/project/issues/pwa?text=&status=Open&priorities=All&categories=All&version=8.x&component=All">PWA D8 issue queue</a></p>
					</section>
				</section>
				<section>
					<section>
						<h2>Future Drupal plans</h2>
						<p class="fragment">We're starting with opinionated features and will use our experiences to make flexible APIs.</p>
					</section>
					<section>
						<h2>Service Worker API</h2>
						<p>We're planning a <a href="https://www.drupal.org/project/serviceworker/issues/2679457">Service Worker API</a> and<br> hashing out ideas for a centralized Drupal API.</p>
						<p class="fragment">Plan: leverage JS community tools<br> to generate a customized Service Worker.</p>
					</section>
					<section>
						<h2>Ideal Outcome</h2>
						<p>Allow unrelated modules/themes to request specific features of PWA functionality using hooks.</p>
					</section>
					<section>
						<h2>Possibilities with SW API</h2>
						<ul>
							<li class="fragment">Push notification module</li>
							<li class="fragment">Background sync module</li>
							<li class="fragment">PWA 2.0 reduced to manifest.json config</li>
							<li class="fragment">Views config that caches specific Ajax paths offline</li>
							<li class="fragment">Themes that provide an "app shell" and dynamically load new URLs as a faux-<abbr title="single-page application">SPA</abbr></li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Finished</h2>
						<p>Say hi:</p>
						<ul class="tiles">
							<li><a href="https://chrisruppel.com/work/" target="_blank" rel="noopener">chris</a></li>
							<li><a href="https://twitter.com/rupl" target="_blank" rel="noopener">twitter</a></li>
							<li><a href="https://github.com/rupl" target="_blank" rel="noopener">github</a></li>
						</ul>
					</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				defaultTiming: 600,
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
